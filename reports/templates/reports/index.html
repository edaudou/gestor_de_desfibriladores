{% extends 'home.html' %}
{% load crispy_forms_tags %}

{% block container %}
  <div>
    {% if  request.user.is_anonymous %}
      <script>
        function openRegisterForm(id){
          let visibility = document.getElementById(id);
          let client = document.getElementById('clientForm');
          let pro = document.getElementById('proForm');

          if (visibility == client && client.style.display == "none"){
           console.log("DISPLAY CLIENT");

            visibility.style.display = "block";
            pro.style.display = "none";
          }

          if(visibility == pro && pro.style.display == "none"){
            console.log("DISPLAY PRO");
            client.style.display = "none";
            visibility.style.display = "block";
          }
          
        }

        
      </script>
        <!-- multistep form -->
        <div class="defaultForm">
          <button type="button" class="typebutton" onclick="openRegisterForm('clientForm')">Cliente</button>
          <button type="button" class="typebutton" onclick="openRegisterForm('proForm')">Profesional</button>
        </div>
      
        <form method="post" id="clientForm" style="display: none;"  class="defaultForm">
          <!-- progressbar -->
          <ul id="progressbar">
            <li class="active">Datos de la compañia</li>
            <li>Datos del usuario</li>
          </ul>
          <!-- fieldsets -->
        {% csrf_token %}
        <fieldset>
          <h2 class="fs-title">Datos compañía</h2>
        {% for field in companyform %}
          <p>
            {{ field }}
            {% for error in field.errors %}
              <p style="color: red">{{ error }}</p>
            {% endfor %}
          </p>
        {% endfor %}
        <input type="button" name="next" id="next" class="next action-button" value="Siguiente" />
      </fieldset>
      <fieldset>
        <h2 class="fs-title">Datos usuario</h2>
          {% for field in clientform %}
            <p>
              {{ field }}
              {% for error in field.errors %}
                <p style="color: red">{{ error }}</p>
              {% endfor %}
            </p>
          {% endfor %}
          {% for field in form %}
            <p>
              {{ field }}
              {% for error in field.errors %}
                <p style="color: red">{{ error }}</p>
              {% endfor %}
            </p>
          {% endfor %}
          <input type="button" name="previous" class="previous action-button" value="Anterior" />

        <button type="submit" action="" onsubmit = "validacion();"class="validate action-button">Registrarse</button>
        </fieldset>
      </form>


      <div class="container">
        <form method="post"id="proForm" class="defaultForm" >
          {% csrf_token %}
          <fieldset>
            <h2> Datos usuario técnico</h2>
              {% for field in proform %}
                <p>
                  {{ field }}
                  {% for error in field.errors %}
                    <p style="color: red">{{ error }}</p>
                  {% endfor %}
                </p>
              {% endfor %}
              {% for field in form %}
                <p>
                  {{ field }}
                  {% for error in field.errors %}
                    <p style="color: red">{{ error }}</p>
                  {% endfor %}
                </p>
              {% endfor %}
            <button type="submit" action="" class="action-button">Registrarse</button>
          </fieldset>
        </form>
      </div>
    {% endif %}
    <!-- <p style =" color: red;">  * (Campos obligatorios)</p> -->


{% endblock %}    
